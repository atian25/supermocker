<div class="panel panel-primary">
  <div class="panel-heading">
    <span class="glyphicon glyphicon-list"></span> API Lists
  </div>
  <div class="panel-body">
    <form class="form-horizontal">
      <!-- view space -->
      <div class="form-group" ng-show="!vm.isEditingSpace">
        <label class="col-md-2 control-label pull-left" style="padding-right: 4px;font-size: 12px;font-weight: normal;text-align: left">Space: </label>
        <div class="col-md-6 pull-left">
          <select ng-model="vm.currentSpace" class="form-control input-sm" style="padding-left: 0px;" name="currentSpace"
                  ng-options="'/'+item.path+(item.disabled ? '(disabled)' : '') for item in vm.spaceList"
                  ng-change="vm.switchSpace(vm.currentSpace)"></select>
        </div>
        <!-- space op -->
        <div class="btn-group pull-left">
          <button type="button" class="btn btn-default btn-sm" ng-if="vm.currentSpace" ng-click="vm.editSpace(vm.currentSpace)">
            <span class="glyphicon glyphicon-edit"></span>
          </button>
          <button type="button" class="btn btn-default btn-sm" ng-if="vm.currentSpace" ng-click="vm.removeSpace(vm.currentSpace)">
            <span class="glyphicon glyphicon-trash"></span>
          </button>
          <button type="button" class="btn btn-default btn-sm" ng-click="vm.editSpace()">
            <span class="glyphicon glyphicon-plus"></span>
          </button>
        </div>
      </div>
      <!-- edit space -->
      <div class="form-group" ng-show="vm.isEditingSpace">
        <label class="col-md-2 control-label" style="padding-right: 4px;font-size: 12px;font-weight: normal">Editï¼š</label>
        <div class="col-md-6">
          <input type="text" class="form-control input-sm" ng-model="vm.editingSpace.path">
        </div>
        <!-- space op -->
        <div class="btn-group">
          <button type="button" class="btn btn-default btn-sm" ng-click="vm.saveSpace()">
            <span class="glyphicon glyphicon-floppy-disk"></span>
          </button>
          <button type="button" class="btn btn-default btn-sm" ng-click="vm.cancelEditSpace()">
            <span class="glyphicon glyphicon-floppy-remove"></span>
          </button>
        </div>
      </div>
    </form>
    <hr>

    <div ng-repeat="group in vm.currentGroups" ng-init="groupIndex = $index">
      <div class="panel panel-info">
        <div class="panel-heading">
          <span class="glyphicon glyphicon-list"></span> {{group.name}}
          <i class="glyphicon glyphicon-chevron-down pull-right"></i>
          <div class="pull-right" style="margin-right: 10px;">
            <div class="btn-group">
              <button type="button" class="btn btn-default btn-xs" ng-click="vm.editRule(null, group, groupIndex);">
                <span class="glyphicon glyphicon-plus"></span>
              </button>
            </div>
          </div>
        </div>
        <ul class="list-group">
          <li class="list-group-item" ng-repeat="item in vm.currentRules[groupIndex]" ng-click="vm.editRule(item, group, groupIndex);">
            <span class="label" style="margin-right: 10px;" ng-class="{'ALL': 'label-default', 'GET':'label-info','POST':'label-success','PUT':'label-warning','DELETE':'label-danger'}[item.method||'ALL']">
              {{item.method||'ALL'}}
            </span>
            <span ng-if="!item.disabled">{{item.path}}</span>
            <del ng-if="item.disabled" style="color:#808080;"><em>{{item.path}}</em></del>
            <div class="pull-right action-buttons">
              <button type="button" class="btn btn-info btn-xs" ng-click="vm.editRule(item, group, groupIndex); $event.stopPropagation();">
                <span class="glyphicon glyphicon-edit"></span>
              </button>
              <button type="button" class="btn btn-default btn-xs" ng-class="{'btn-default': !item.disabled, 'btn-info': item.disabled}" ng-click="vm.toggleRule(item, group, groupIndex); $event.stopPropagation();">
                <span class="glyphicon glyphicon-ban-circle"></span>
              </button>
              <button type="button" class="btn btn-warning btn-xs" ng-click="vm.removeRule(item, group, groupIndex); $event.stopPropagation();">
                <span class="glyphicon glyphicon-trash"></span>
              </button>
            </div>
          </li>
        </ul>
      </div>
    </div>

  </div>
</div>